---
// (Removed unused Image import during lint cleanup)
import { siteConfig } from '~/config/siteConfig';

const {
  name,
  tagline = "Bond Cleaning Experts",
  phone,
  email,
} = siteConfig.business;

const logoImg = '/logo.svg'; // Stored in /public

// prettified “0412345678” or “+61405779420” → “0412 345 678” or "+61 405 779 420"
function formatPhone(phone) {
  if (phone.startsWith('+61')) {
    // Format international AU numbers: +61 405 779 420
    return phone.replace(/(\+61)(\d{1,3})(\d{3})(\d{3})/, "$1 $2 $3 $4");
  } else {
    // Format local: 0412 345 678
    return phone.replace(/(\d{4})(\d{3})(\d{3})/, "$1 $2 $3");
  }
}
const formattedPhone = formatPhone(phone);
---

<article
  class="group grid md:grid-cols-[260px,1fr] bg-white rounded-2xl shadow-lg border border-slate-200 overflow-hidden
         transition duration-500 ease-[cubic-bezier(0.22,1,0.36,1)] hover:shadow-2xl"
  aria-label={`Contact card for ${name}`}
>
  <!-- ◀︎  Gradient / logo column -->
  <div
    class="relative flex flex-col items-center justify-center gap-4 p-8 text-center
           bg-gradient-to-br from-sky-500 via-cyan-600 to-teal-600
           bg-[length:200%_200%] transition-[background-position] duration-700 group-hover:bg-right-bottom"
  >
    <!-- Decorative bubbles -->
    <span class="absolute w-12 h-12 bg-white/20 rounded-full top-1/4 left-[15%] animate-float-slow"></span>
    <span class="absolute w-6  h-6  bg-white/20 rounded-full top-[45%] right-1/4 animate-float-fast delay-[0.4s]"></span>
    <span class="absolute w-8  h-8  bg-white/20 rounded-full bottom-[20%] right-[20%] animate-float-medium delay-[0.2s]"></span>

    <!-- Logo (always use your SVG, never break on missing img) -->
    <div class="w-40 aspect-square bg-white p-3 rounded-full border-4 border-white shadow-md
                transition duration-500 group-hover:-translate-y-2 group-hover:rotate-3 group-hover:scale-105 flex items-center justify-center">
      <img
        src={logoImg}
        alt={`${name} Logo`}
        width="160"
        height="160"
        class="w-full h-full object-contain rounded-full"
        loading="lazy"
        decoding="async"
        style="background: none"
      />
    </div>

    <div>
      <h3 class="font-extrabold text-2xl text-white tracking-tight">{name}</h3>
      <p class="text-white/90">{tagline}</p>
    </div>
  </div>

  <!-- ◀︎  Contact details column -->
  <div class="flex flex-col gap-6 p-8 justify-center">
    <p class="text-slate-600 -mt-2">
      Contact us 7 days a week for a fast, free quote.
    </p>

    <!-- phone -->
    <a
      href={`tel:${phone}`}
      aria-label={`Call ${name}`}
      class="flex items-center gap-4 text-slate-700 hover:text-sky-600 transition text-lg"
    >
      <svg class="w-6 h-6 flex-shrink-0 text-sky-600" viewBox="0 0 20 20" fill="currentColor">
        <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z" />
      </svg>
      <span class="font-semibold">{formattedPhone}</span>
    </a>

    <!-- email -->
    <a
      href={`mailto:${email}`}
      aria-label={`Email ${name}`}
      class="flex items-center gap-4 text-slate-700 hover:text-sky-600 transition text-lg"
    >
      <svg class="w-6 h-6 flex-shrink-0 text-sky-600" viewBox="0 0 20 20" fill="currentColor">
        <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"/>
        <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"/>
      </svg>
      <span class="font-semibold">{email}</span>
    </a>

    <!-- CTA button -->
    <a
      href={`tel:${phone}`}
      class="mt-2 inline-block text-center bg-sky-600 text-white font-bold py-3 rounded-lg
             hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sky-500
             transition-transform duration-300 hover:scale-105"
    >Call Now</a>
  </div>
</article>

<style is:global>
@keyframes float-slow   { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-8px)} }
@keyframes float-medium { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-10px)}}
@keyframes float-fast   { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-12px)}}
.animate-float-slow   {animation:float-slow   10s ease-in-out   infinite;}
.animate-float-medium {animation:float-medium  7s ease-in-out   infinite;}
.animate-float-fast   {animation:float-fast    5s ease-in-out   infinite;}
</style>